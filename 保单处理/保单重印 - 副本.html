<!DOCTYPE html
	PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="renderer" content="webkit|ie-comp|ie-stand">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="viewport"
		content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" />
	<meta http-equiv="Cache-Control" content="no-siteapp" />
	<title>保单重印</title>
	<link href="../assets/css/bootstrap.min.css" rel="stylesheet" />
	<link rel="stylesheet" href="../css/style_add.css" />
	<link href="../css/style.css" rel="stylesheet" />
	<link href="../assets/css/codemirror.css" rel="stylesheet" />
	<link href="../assets/css/ace.min.css" rel="stylesheet" />
	<link href="../font/css/font-awesome.min.css" rel="stylesheet" />
	<link rel="stylesheet" href="../assets/css/font-awesome.min.css" />
	<!--[if lte IE 8]>
		  <link rel="stylesheet" href="assets/css/ace-ie.min.css" />
		<![endif]-->
	<script src="../js/jquery-1.9.1.min.js"></script>
	<script src="../assets/js/typeahead-bs2.min.js"></script>
	<script src="../js/lrtk.js" type="text/javascript"></script>
	<script src="../assets/js/jquery.dataTables.min.js"></script>
	<script src="../assets/js/jquery.dataTables.bootstrap.js"></script>
	<script src="../assets/layer/layer.js" type="text/javascript"></script>
		<style>

		.file-list {
			height: 125px;
			display: none;
			list-style-type: none;
		}

		.file-list img {
			max-width: 70px;
			vertical-align: middle;
		}

		.file-list .file-item {
			margin-bottom: 10px;
			float: left;
			margin-left: 20px;
		}


		.file-list .file-item .file-del {
			display: block;
			margin-left: 20px;
			margin-top: 5px;
			cursor: pointer;
		}
	</style>
</head>

<body>
	<div class="page-content clearfix">
		<div id="brand_style">
			<div class="search_style">
				<ul class="search_content clearfix">
					<li><label class="l_f">销售渠道</label><input name="" type="text" class="text_add" placeholder="" />
					</li>
					<li><label class="l_f">保单号码</label><input name="" type="text" class="text_add" placeholder="" />
					</li>
					<li style="width:90px;"><button type="button" class="btn_search"><i
								class="icon-search"></i>查询投保单</button></li>
				</ul>
				<ul class="search_content clearfix">
					<li><label class="l_f">管理机构</label><input name="" type="text" class="text_add" placeholder="" />
					</li>
				</ul>
			</div>

			<div class="sort_style">

				<div class="sort_list">
					<table class="table table-striped table-bordered table-hover" id="sample-table">
						<thead>
							<tr>

								<th width="10%">保单号</th>
								<th width="8%">投保单号</th>
								<th width="14%">保费</th>
								<th width="14%">投保人姓名</th>
								<th width="12%">保费打印日期</th>
								<th width="16%">操作</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>300000930409</td>
								<td>300000930402</td>
								<td>1322.00</td>
								<td>张三</td>
								<td>2017/01/01</td>
								<td class="td-manage">
									<a title="查看" href="javascript:ovid()" onclick="service_(this,'view')"
										class="operating">保单重印</a>
								</td>
							</tr>

							<tr>
								<td>300000930410</td>
								<td>300000930421</td>
								<td>1322.00</td>
								<td>李四</td>
								<td>2017/01/03</td>
								<td class="td-manage">
									<a title="查看" href="javascript:ovid()" onclick="service1_(this,'view')"
										class="operating">保单重印</a>
								</td>
							</tr>


						</tbody>
					</table>
					<div class="formFooter_style" id="formFooterstyle">
						<div class="row">
							<div class="col-sm-13">
								<div id="sample-table_length" class="dataTables_length">
									<label>
										&nbsp;&nbsp;每页显示条数：
										<select class="" name="sample-table_length" aria-controls="sample-table">
											<option value="1">10</option>
											<option value="2">20</option>
											<option value="3">30</option>
										</select>
									</label>
								</div>
							</div>
							<div class="col-sm-14">
								<div id="sample-table_paginate" class="dataTables_paginate paging_bootstrap">
									<ul class="pagination">

										<li class="prev disabled"><a href="#">上一页</a></li>
										<li class="active"><a href="#"></a></li>
										<li class="next disabled"><a href="#">下一页</a></li>

										<li class="jump">&nbsp;第1/1页,共2条匹配记录</li>
										<li class="jump">
											转至第<input name="" type="text" class="jump_page" placeholder="" />页
											<button type="button" class="jump_go">GO</button>

										</li>
									</ul>
								</div>
							</div>
						</div>

					</div>

				</div>
			</div>
		</div>
	</div>

	<!--*************添加/编辑/查看用户****************-->
	<div class="sort_style_add margin" id="service_style_add" style="display:none">

		<div class="">
			<ul>
				<li><label class="col-sm-2 control-label no-padding-right">选择制单类型：</label>
					<div class="col-sm-9">
						<select class="memberAdd_select_list">
							<option value="1">特殊件重印</option>
							<option value="2">实时保单整本重印</option>
							<option value="3">个人保险凭证</option>
						</select>
					</div>
				</li>
				<li>
					<label class="col-sm-2 control-label no-padding-right">上传申请资料：</label>
					<div class="col-sm-9"><input type="file" name="" id="choose-file" multiple="multiple" style="width: 200px;" /></div>
					<ul class="file-list ">
					</ul>
					<button style="cursor: pointer;margin: 20px 0 10px 230px;" href="javascript:;" id="upload"
						class="btn btn-primary">上传</button>
				</li>
				<li><label class="col-sm-2 control-label no-padding-right">请输入备注：</label>
					<div class="col-sm-9"><textarea name="" class="col-sm-8" style="min-height:100px;" placeholder=""
							onkeyup="checkLength(this);"></textarea></div>
				</li>
			</ul>
		</div>
	</div>

</body>

</html>
<script>
	function service1_(obj, type) {
		alert("保单无效!");
	}
	/*用户-添加/编辑/查看*/
	function service_(obj, type) {
		var _this = obj;
		var pageTitle = '保单详情';
		layer.open({
			type: 1,
			title: pageTitle,
			maxmin: true,
			shadeClose: true, //点击遮罩关闭层
			area: ['800px', ''],
			content: $('#service_style_add'),
			btn: ['提交', '取消'],
			yes: function (index, layero) {
				var num = 0;
				var str = "";
				$(".sort_style_add input[type$='text']").each(function (n) {
					if (_this.val() == "") {

						layer.alert(str += "" + _this.attr("name") + "不能为空！\r\n", {
							title: '提示框',
							icon: 0,
						});
						num++;
						return false;
					}
				});
				if (num > 0) { return false; }
				else {
					layer.alert('添加成功！', {
						title: '提示框',
						icon: 1,
					});
					layer.close(index);
				}
			}
		});
	}
	$(function () {
			////////////////////////////////////////////////图片上传//////////////////////////////////////////////
			//声明变量
			var $button = $('#upload'),
				//选择文件按钮
				$file = $("#choose-file"),
				//回显的列表
				$list = $('.file-list'),
				//选择要上传的所有文件
				fileList = [];
			//当前选择上传的文件
			var curFile;
			// 选择按钮change事件，实例化fileReader,调它的readAsDataURL并把原生File对象传给它，
			// 监听它的onload事件，load完读取的结果就在它的result属性里了。它是一个base64格式的，可直接赋值给一个img的src.
			$file.on('change', function (e) {
				//上传过图片后再次上传时限值数量
				var numold = $('li').length;
				if (numold >= 6) {
					layer.alert('最多上传6张图片');
					return;
				}
				//限制单次批量上传的数量
				var num = e.target.files.length;
				var numall = numold + num;
				if (num > 6) {
					layer.alert('最多上传6张图片');
					return;
				} else if (numall > 6) {
					layer.alert('最多上传6张图片');
					return;
				}
				//原生的文件对象，相当于$file.get(0).files;//files[0]为第一张图片的信息;
				curFile = this.files;
				//curFile = $file.get(0).files;
				//console.log(curFile);
				//将FileList对象变成数组
				fileList = fileList.concat(Array.from(curFile));
				//console.log(fileList);
				for (var i = 0, len = curFile.length; i < len; i++) {
					reviewFile(curFile[i])
				}
				$('.file-list').fadeIn(2500);
			})


			function reviewFile(file) {
				//实例化fileReader,
				var fd = new FileReader();
				//获取当前选择文件的类型
				var fileType = file.type;
				//调它的readAsDataURL并把原生File对象传给它，
				fd.readAsDataURL(file);//base64
				//监听它的onload事件，load完读取的结果就在它的result属性里了
				fd.onload = function () {
					if (/^image\/[jpeg|png|jpg|gif]/.test(fileType)) {
						$list.append('<li style="border:solid red px; margin:5px 5px;" class="file-item"><img src="' + this.result + '" alt="" height="70"><span class="file-del">删除</span></li>').children(':last').hide().fadeIn(2500);
					} else {
						$list.append('<li class="file-item"><span class="file-name">' + file.name + '</span><span class="file-del">删除</span></li>')
					}

				}
			}

			//点击删除按钮事件：
			$(".file-list").on('click', '.file-del', function () {
				let $parent = $(this).parent();
				console.log($parent);
				let index = $parent.index();
				fileList.splice(index, 1);
				$parent.fadeOut(850, function () {
					$parent.remove()
				});
				//$parent.remove()
			});
		})
</script>